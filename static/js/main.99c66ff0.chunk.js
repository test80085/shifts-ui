(this["webpackJsonpshifts-ui"]=this["webpackJsonpshifts-ui"]||[]).push([[0],{65:function(e,t,a){},78:function(e,t,a){e.exports=a(97)},83:function(e,t,a){},92:function(e,t,a){},94:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),u=(a(83),a(55)),o=a.n(u),m="/submission",i="/management",s="/admin",E=a(52);var f=function(){return r.a.createElement("footer",null,r.a.createElement("div",null,r.a.createElement("h6",null,"Created by Guy Shamilian & Yehonatan Simian \xa9 2020"),r.a.createElement(E.a,null,r.a.createElement("ul",{style:{textAlign:"right"}},r.a.createElement("li",null,r.a.createElement(o.a,{to:m},"\u05d4\u05d2\u05e9\u05ea \u05de\u05e9\u05de\u05e8\u05d5\u05ea")),r.a.createElement("li",null,r.a.createElement(o.a,{to:i},"\u05e0\u05d9\u05d4\u05d5\u05dc \u05de\u05e9\u05de\u05e8\u05d5\u05ea")),r.a.createElement("li",null,r.a.createElement(o.a,{to:s},"\u05e1\u05ea\u05dd \u05e0\u05d9\u05d4\u05d5\u05dc"))))))},h=a(5);var d=function(e){return r.a.createElement("header",null,r.a.createElement("h1",null,e.title))};a(92);var b=function(e){var t=e.id;return"\u05e2\u05e8\u05d1"===e.header?t++:"\u05dc\u05d9\u05dc\u05d4"===e.header&&(t+=2),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",name:"shift-"+t,id:"shift-"+t,className:"check-box"}),r.a.createElement("label",{for:"shift-"+t}))};var v=function(e){var t=Array.from(Array(7),(function(e,t){return 3*t})).map((function(t){return r.a.createElement(b,{header:e.header,id:t})}));return r.a.createElement("tr",null,r.a.createElement("th",null,e.header),t)},g=a(21);var p=function(){var e=["\u05d1\u05d5\u05e7\u05e8","\u05e2\u05e8\u05d1","\u05dc\u05d9\u05dc\u05d4"].map((function(e){return r.a.createElement(v,{header:e})})),t=["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"].map((function(e){return r.a.createElement("th",null,e)}));return r.a.createElement("div",null,r.a.createElement(g.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("tr",null,r.a.createElement("th",null),t),e))},k=a(9),j=a(10);var O=function(e){var t=e.withTitle?r.a.createElement(k.a.Label,{column:!0,xs:"3"},"\u05d1\u05e7\u05e8/\u05d9\u05ea: "):null;return r.a.createElement(k.a.Row,null,t,r.a.createElement(j.a,{xs:"9"},r.a.createElement(k.a.Control,{as:"select",name:"name",onChange:e.onChange},e.showChooseBakar?r.a.createElement("option",{value:"",disabled:!0,selected:!0},"\u05d1\u05d7\u05e8/\u05d9 \u05d1\u05e7\u05e8/\u05d9\u05ea"):"",e.bakarim.map((function(e){return r.a.createElement("option",{value:e},e)})),e.addNew?r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{disabled:!0},"--------"),r.a.createElement("option",{value:"addNew"},"\u05d4\u05d5\u05e1\u05e4\u05ea \u05d1\u05e7\u05e8/\u05d9\u05ea \u05d7\u05d3\u05e9/\u05d4")):"")))};function y(){var e=new Date;return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)}function w(e){var t=new Date,a=t.getFullYear();t.setHours(0,0,0,0),t.setDate(t.getDate()+3+7*e-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return a+"-W"+(1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7))}function C(e){var t=e.slice(0,4),a=e.slice(6,8),n=new Date(""+t),r=n.getDay()-1;n.setDate(n.getDate()-r),n.setDate(n.getDate()+(7*(a-function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var a=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-a.getTime())/864e5-3+(a.getDay()+6)%7)/7)}(n))-1));var l=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear();return n.setDate(n.getDate()+6),n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()+" - "+l}var S=function(e){return r.a.createElement(k.a.Row,null,e.withTitle&&r.a.createElement(k.a.Label,{column:!0,xs:"3"},"\u05e9\u05d1\u05d5\u05e2: "),r.a.createElement(j.a,{xs:"9"},r.a.createElement(k.a.Control,{type:"week",id:"week",name:"week",min:"2020-W01",defaultValue:e.week?e.week:w(e.defaultWeek),onChange:e.onChange,required:!0})))},x=a(31),D=a(46),N=a(17);var _=function(e){var t=["\u05ea\u05d5\u05d3\u05d4 \u05e8\u05d1\u05d4","\u05ea\u05d5\u05d3\u05d5\u05e9","\u05d0\u05e9 \u05e2\u05dc\u05d9\u05da","\u05d9\u05e4\u05d4 \u05de\u05d0\u05d5\u05d3","\u05d4\u05e6\u05dc\u05d9\u05d7 \u05dc\u05da \u05d4\u05e4\u05e2\u05dd"],a=["\u05d0\u05d7\u05dc\u05d4","\u05de\u05d2\u05e0\u05d9\u05d1","\u05d9\u05e9 \u05dc\u05d9 \u05d8\u05d7\u05d5\u05e8\u05d9\u05dd","\u05d5\u05d5\u05d4\u05d5\u05d5\u05d5\u05d5","\u05d1\u05d9\u05d9","\u05d0\u05e1\u05d8\u05d4 \u05dc\u05d4 \u05d5\u05d5\u05d9\u05e0\u05d3\u05d5\u05e1 \u05d5\u05d5\u05d9\u05e1\u05d8\u05d4"],n=t[Math.floor(Math.random()*t.length)]+"!";return r.a.createElement(N.a,{show:e.show,onHide:e.handleClose,animation:!1},r.a.createElement(N.a.Header,{closeButton:!0},r.a.createElement(N.a.Title,null,n)),r.a.createElement(N.a.Body,{style:{textAlign:"right"}},"\u05d4\u05de\u05e9\u05de\u05e8\u05d5\u05ea \u05d4\u05d5\u05d2\u05e9\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),r.a.createElement(N.a.Footer,null,r.a.createElement(x.a,{variant:"primary",onClick:e.handleClose,autoFocus:!0},a[Math.floor(Math.random()*a.length)])))};var M=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),l=a[0],c=a[1],u=Object(n.useRef)(null);return r.a.createElement("main",null,r.a.createElement(_,{show:l,handleClose:function(){c(!1),window.location.reload()}}),r.a.createElement(D.a,null,r.a.createElement(k.a,{ref:u,onSubmit:function(e){e.preventDefault();var t=new FormData(u.current);fetch("/submitconstraints",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){c(!0)})).catch((function(e){alert("\u05de\u05e9\u05d4\u05d5 \u05e0\u05d3\u05e4\u05e7, \u05d4\u05de\u05e9\u05de\u05e8\u05d5\u05ea \u05dc\u05d0 \u05d4\u05d5\u05d2\u05e9\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4 :(")}))},method:"POST"},r.a.createElement(k.a.Group,null,r.a.createElement(j.a,{sm:"6"},r.a.createElement(O,{withTitle:!0,bakarim:e.bakarim}))),r.a.createElement(k.a.Group,null,r.a.createElement(j.a,{sm:"6"},r.a.createElement(S,{defaultWeek:1,withTitle:!0}))),r.a.createElement(k.a.Group,null,r.a.createElement(p,null)),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Row,null,r.a.createElement(k.a.Label,null,"\u05d4\u05e2\u05e8\u05d5\u05ea: "),r.a.createElement(k.a.Control,{as:"textarea",name:"comments",rows:"4"}))),r.a.createElement(x.a,{variant:"outline-primary",type:"submit"},"\u05e9\u05dc\u05d7/\u05d9"))))};a(65);var A=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){fetch("/getemployees",{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=e.all_emps.map((function(e){return e.full_name}));l(t)})).catch((function(e){alert("couldn't get bakarim from DB: "+e)}))}),[]),r.a.createElement("div",null,r.a.createElement(d,{title:"\u05d8\u05d5\u05e4\u05e1 \u05d4\u05d2\u05e9\u05ea \u05de\u05e9\u05de\u05e8\u05d5\u05ea \u05e9\u05d1\u05d5\u05e2\u05d9\u05d5\u05ea"}),r.a.createElement(M,{bakarim:a}))},F=a(51),T=function(){var e=window;return{windowWidth:e.innerWidth,windowHeight:e.innerHeight}};var P=a(61),R=a(76);var G=function(e){var t=e.dictionary,a=e.bakarim.map((function(e){return{value:e,label:t["short "+e]}})),l=(1===a.length&&(a[0],a[0]),Object(n.useState)(!0)),c=Object(h.a)(l,2),u=(c[0],c[1]),o=Object(n.useState)(),m=Object(h.a)(o,2),i=m[0],s=m[1];Object(n.useEffect)((function(){s(null)}),[e.week]);var E={multiValue:function(e,a){var n=a.data;return Object(P.a)(Object(P.a)({},e),{},{backgroundColor:t[n.value]})}};return r.a.createElement("td",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:"select-bakarim",styles:E,placeholder:"-"+a.length+"-",value:i,options:a,onChange:function(t){e.handleChange(t,e.id),u(null==t||0===t.length),s(t)},isMulti:!0}),r.a.createElement("input",{name:"shift-"+e.id,tabIndex:-1,autoComplete:"off",style:{display:"none",opacity:0,height:0},value:JSON.stringify(i)})))};var B=function(e){var t=function(t){var a=t;return"\u05e2\u05e8\u05d1"===e.header?a++:"\u05dc\u05d9\u05dc\u05d4"===e.header&&(a+=2),a},a=[0,3,6,9,12,15,18].map((function(a){return r.a.createElement(G,{header:e.header,bakarim:e.bakarim[t(a)],dictionary:e.dictionary,id:t(a),week:e.week,handleChange:e.handleChange})}));return r.a.createElement("tr",null,r.a.createElement("th",null,e.header),a)},H=a(47),W=a.n(H);var L=function(e){var t=e.bakarim.map((function(e){return e.full_name})),a=Array.from(Array(21).keys()).map((function(e){return t})),l=Array.from(Array(21).keys()).map((function(e){return[]})),c=Object(n.useState)(a),u=Object(h.a)(c,2),o=u[0],m=u[1],i=function(e,t){return null};return Object(n.useEffect)((function(){!function(n){if(l,l,n)a,m(a);else try{var r=Array.from(Array(21).keys()).map((function(a){return t.filter((function(t){return null==e.data.filter((function(e){return e.name===t}))[0].shifts[a]}))}));r,m(r),r.map((function(t){return 0===t.length?e.setShowAlert2(!0):void 0}))}catch(c){a,l,m(a)}}(e.ignore)}),[e.week,e.ignore]),r.a.createElement("div",null,r.a.createElement(g.a,{className:"q",striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("tr",null,r.a.createElement("th",null),["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"].map((function(e){return r.a.createElement("th",null,e)}))),["\u05d1\u05d5\u05e7\u05e8","\u05e2\u05e8\u05d1","\u05dc\u05d9\u05dc\u05d4"].map((function(t){return r.a.createElement(B,{header:t,week:e.week,bakarim:o,dictionary:e.dictionary,handleChange:i})}))))};var Y=function(e){var t=e.id;"\u05e2\u05e8\u05d1"===e.header?t++:"\u05dc\u05d9\u05dc\u05d4"===e.header&&(t+=2);var a="on"===e.blocks[t]?"X":"";return r.a.createElement("td",null,r.a.createElement("h5",{style:{color:"red"}},a))};var I=function(e){var t=[0,3,6,9,12,15,18].map((function(t){return r.a.createElement(Y,{header:e.header,id:t,blocks:e.blocks})}));return r.a.createElement("tr",null,r.a.createElement("th",null,e.header),t)};var K=function(e){var t=C(e.week);return r.a.createElement(k.a.Group,{className:"ready-table"},r.a.createElement("h4",null,"\u05d8\u05d1\u05dc\u05ea \u05d4\u05d7\u05e1\u05d9\u05de\u05d5\u05ea \u05e9\u05dc ",e.name," \u05dc\u05e9\u05d1\u05d5\u05e2 ",t),r.a.createElement(g.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("tr",null,r.a.createElement("th",null),["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"].map((function(e){return r.a.createElement("th",null,e)}))),["\u05d1\u05d5\u05e7\u05e8","\u05e2\u05e8\u05d1","\u05dc\u05d9\u05dc\u05d4"].map((function(t){return r.a.createElement(I,{header:t,blocks:e.blocks})}))),r.a.createElement(k.a.Control,{as:"textarea",className:"unresizeable",disabled:!0},e.comments))},z=a(74),J=a(28);var q=function(e){var t=e.items,a=Object(n.useState)(),l=Object(h.a)(a,2),c=l[0],u=l[1];return r.a.createElement(z.a,{fluid:!0},r.a.createElement(J.a,null,r.a.createElement(j.a,{md:"6"},r.a.createElement("h3",null,"\u05d4\u05e6\u05d2 \u05d0\u05d9\u05dc\u05d5\u05e5 \u05e9\u05dc \u05d4\u05d1\u05e7\u05e8/\u05d9\u05ea: ")),r.a.createElement(j.a,{md:"6"},r.a.createElement(O,{title:"\u05d4\u05e6\u05d2 \u05d8\u05d1\u05dc\u05ea \u05d0\u05d9\u05dc\u05d5\u05e6\u05d9\u05dd \u05e9\u05dc \u05d4\u05d1\u05e7\u05e8/\u05d9\u05ea: ",bakarim:e.bakarim.map((function(e){return e.full_name})),isHeader:!0,showChooseBakar:!0,onChange:function(e){return u(t[e.target.value])}}))),r.a.createElement("br",null),r.a.createElement(J.a,null,c&&r.a.createElement(K,{name:c.name,week:e.week,blocks:c.shifts,comments:c.comments})))},V=a(12);var X=function(){var e=Object(n.useState)(!0),t=Object(h.a)(e,2),a=t[0],l=t[1];return a&&r.a.createElement(V.a,{variant:"danger",onClose:function(){return l(!1)},dismissible:!0},r.a.createElement(V.a.Heading,null,"\u05d0\u05d5\u05e4\u05e1! \u05e0\u05e8\u05d0\u05d4 \u05db\u05d9 \u05d0\u05d9\u05df \u05d1\u05db\u05dc\u05dc \u05d1\u05e7\u05e8\u05d9\u05dd \u05d1\u05d3\u05d0\u05d8\u05d0\u05d1\u05d9\u05d9\u05e1 :O"),r.a.createElement("h6",null,"\u05e0\u05e1\u05d5 ",r.a.createElement(V.a.Link,{href:s},"\u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05d1\u05e7\u05e8\u05d9\u05dd \u05dc\u05de\u05d0\u05d2\u05e8")," \u05e2\u05dc \u05de\u05e0\u05ea \u05e9\u05ea\u05d5\u05db\u05dc\u05d5 \u05dc\u05d4\u05db\u05d9\u05df \u05de\u05e9\u05de\u05e8\u05d5\u05ea."))};var $=function(e){var t=Object(n.useState)(!0),a=Object(h.a)(t,2),l=a[0],c=a[1],u=C(e.week);return Object(n.useEffect)((function(){c(!0)}),[u]),l?e.bakarim.length>0?r.a.createElement(V.a,{variant:"danger",onClose:function(){return c(!1)},dismissible:!0},r.a.createElement(V.a.Heading,null,"\u05d4\u05d1\u05e7\u05e8\u05d9\u05dd \u05d4\u05d1\u05d0\u05d9\u05dd \u05d8\u05e8\u05dd \u05d4\u05d2\u05d9\u05e9\u05d5 \u05de\u05e9\u05de\u05e8\u05d5\u05ea \u05dc\u05e9\u05d1\u05d5\u05e2 ",u,":"),r.a.createElement("p",null,r.a.createElement("ul",{style:{textAlign:"right"}},e.bakarim))):r.a.createElement(V.a,{variant:"success",onClose:function(){return c(!1)},dismissible:!0},r.a.createElement(V.a.Heading,null,"\u05d4\u05d9\u05d3\u05d3! \u05db\u05dc \u05d4\u05d1\u05e7\u05e8\u05d9\u05dd \u05d4\u05d2\u05d9\u05e9\u05d5 \u05de\u05e9\u05de\u05e8\u05d5\u05ea \u05dc\u05e9\u05d1\u05d5\u05e2 ",u," :)")):""};var Q=function(e){var t=Object(n.useState)(e.showAlert),a=Object(h.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){c(e.showAlert)}),[e.showAlert]),l&&r.a.createElement(V.a,{variant:"danger",onClose:function(){return c(!1)},dismissible:!0},r.a.createElement(V.a.Heading,null,'\u05d0\u05d1\u05d5\u05d9! \u05de\u05e9\u05de\u05e8\u05ea \u05d0\u05d7\u05ea \u05d0\u05d5 \u05d9\u05d5\u05ea\u05e8 \u05e0\u05d7\u05e1\u05de\u05d5 \u05e2"\u05d9 \u05db\u05dc \u05d4\u05d1\u05e7\u05e8\u05d9\u05dd :('))};var U=function(e){var t=e.count,a=Object(n.useState)(0!==t),l=Object(h.a)(a,2),c=l[0],u=l[1];return Object(n.useEffect)((function(){u(0!==t)}),[e.count]),c&&r.a.createElement(V.a,{variant:"warning",onClose:function(){return u(!1)},dismissible:!0},r.a.createElement(V.a.Heading,null,"\u05e9\u05d9\u05dd \u05dc\u05d1, \u05d9\u05e9 ",e.count," \u05d1\u05e7\u05e8\u05d9\u05dd \u05e9\u05e2\u05d5\u05e9\u05d9\u05dd 8-8."))};var Z=function(e){var t=["\u05ea\u05d5\u05d3\u05d4 \u05e8\u05d1\u05d4","\u05ea\u05d5\u05d3\u05d5\u05e9","\u05d0\u05e9 \u05e2\u05dc\u05d9\u05da","\u05d9\u05e4\u05d4 \u05de\u05d0\u05d5\u05d3","\u05db\u05dc \u05d4\u05db\u05d1\u05d5\u05d3"],a=["\u05d9\u05d0\u05d9\u05d9\u05d9\u05d9\u05d9","\u05d9\u05d0\u05dc\u05dc\u05d4 \u05e6\u05d0 \u05e6\u05d0","\u05d4\u05d5\u05d2\u05e9 \u05d0\u05ea\u05d4 \u05d0\u05d5\u05de\u05e8?","\u05d9\u05d5\u05e0\u05d9 \u05d4\u05de\u05dc\u05da","\u05d4\u05d1\u05e9\u05e8 \u05d8\u05e2\u05d9\u05dd \u05d9\u05d5\u05ea\u05e8 \u05de\u05dc\u05d5\u05d7","\u05e4\u05e6\u05e6\u05d4"],n=t[Math.floor(Math.random()*t.length)]+"!";return r.a.createElement(N.a,{show:e.show,onHide:e.handleClose,animation:!1},r.a.createElement(N.a.Header,{closeButton:!0},r.a.createElement(N.a.Title,null,n)),r.a.createElement(N.a.Body,{style:{textAlign:"right"}},"\u05d4\u05e1\u05d9\u05d3\u05d5\u05e8 \u05d4\u05d5\u05d2\u05e9 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),r.a.createElement(N.a.Footer,null,r.a.createElement(x.a,{variant:"primary",onClick:e.handleClose,autoFocus:!0},a[Math.floor(Math.random()*a.length)])))},ee=a(99);var te=function(e){var t=function(){var e=Object(n.useState)(T()),t=Object(h.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=function(){r(T())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}().windowWidth,a=Object(n.useRef)(null),l=Object(n.useState)([]),c=Object(h.a)(l,2),u=c[0],o=c[1],m=Object(n.useState)(!1),i=Object(h.a)(m,2),s=i[0],E=i[1],f=Object(n.useState)(!1),d=Object(h.a)(f,2),b=d[0],v=d[1],g=Object(n.useState)(null),p=Object(h.a)(g,2),O=p[0],y=p[1],C=Object(n.useState)(!1),N=Object(h.a)(C,2),_=N[0],M=N[1],A=Object(n.useState)(!1),P=Object(h.a)(A,2),R=P[0],G=P[1],B=Object(n.useState)({}),H=Object(h.a)(B,2),W=H[0],Y=H[1],I=Object(n.useState)([]),K=Object(h.a)(I,2),J=K[0],V=K[1];Object(n.useEffect)((function(){null!=O&&(E(!1),fetch("/weekconstraints?week="+O,{method:"GET"}).then((function(e){return e.json()})).then((function(t){var a=t.week_constraints;o(a);var n=a.map((function(e){return e.name})),l=Object(F.a)(e.bakarim.map((function(e){return e.full_name})).filter((function(e){return!n.includes(e)})));V(l.map((function(e){return r.a.createElement("li",null,e)})));var c={};a.map((function(e){return c[e.name]={name:e.name,shifts:e.shifts,comments:e.comments}})),Y(c),re(r.a.createElement(q,{week:O,items:c,bakarim:e.bakarim})),E(!0)})).catch((function(e){alert("tab1 error: "+e),E(!0)})))}),[O]),Object(n.useEffect)((function(){if(0===e.bakarim.length){var t=setTimeout((function(){G(!0),E(!0)}),5e3);return function(){return clearTimeout(t)}}G(!1),y(w(1))}),[e.bakarim]);var te=Object(n.useState)(),ae=Object(h.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)(0),ce=Object(h.a)(le,2),ue=ce[0],oe=(ce[1],Object(n.useState)(!1)),me=Object(h.a)(oe,2),ie=me[0],se=me[1];return s?R?r.a.createElement(X,null):r.a.createElement("main",null,r.a.createElement(Z,{show:ie,handleClose:function(){se(!1),window.location.reload()}}),r.a.createElement($,{bakarim:J,week:O}),r.a.createElement(Q,{showAlert:_}),r.a.createElement(U,{count:ue}),r.a.createElement(D.a,null,r.a.createElement(z.a,{fluid:!0},r.a.createElement(k.a,{ref:a,onSubmit:function(e){e.preventDefault();var t=new FormData(a.current);fetch("/submitschedule",{method:"POST",body:t}).then((function(e){return e})).then((function(e){return se(!0)})).catch((function(e){return alert("\u05de\u05e9\u05d4\u05d5 \u05e0\u05d3\u05e4\u05e7, \u05d4\u05de\u05e9\u05de\u05e8\u05d5\u05ea \u05dc\u05d0 \u05d4\u05d5\u05d2\u05e9\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4 :(")}))},method:"post"},r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Row,null,r.a.createElement(j.a,{sm:"6"},r.a.createElement("h3",null,"\u05d4\u05db\u05e0\u05ea \u05d4\u05e1\u05d9\u05d3\u05d5\u05e8 \u05dc\u05e9\u05d1\u05d5\u05e2: ")),r.a.createElement(j.a,{sm:"6"},r.a.createElement(S,{week:O,defaultWeek:1,onChange:function(t){M(!1),y(t.target.value),re(r.a.createElement(q,{week:t.target.value,items:W,bakarim:e.bakarim}))}}))),r.a.createElement(k.a.Row,null,r.a.createElement(k.a.Check,{type:"switch",label:"\u05d4\u05ea\u05e2\u05dc\u05dd \u05de\u05d0\u05d9\u05dc\u05d5\u05e6\u05d9\u05dd",id:"ignore",checked:b,onClick:function(e){return v(!b)}}))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Row,null,r.a.createElement(j.a,{sm:"12"},t>1420.69?r.a.createElement(L,{data:u,week:O,bakarim:e.bakarim,dictionary:e.dictionary,setShowAlert2:function(e){return M(e)},ignore:b}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"\u05ea\u05d2\u05d3\u05d9\u05dc \u05ea'\u05d7\u05dc\u05d5\u05df \u05d0\u05d1\u05d0"),r.a.createElement("input",{style:{display:"none"},required:!0}))))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Row,null,r.a.createElement(k.a.Label,null,"\u05d4\u05e2\u05e8\u05d5\u05ea: "),r.a.createElement(k.a.Control,{as:"textarea",name:"comments",rows:"3"}))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Row,null,r.a.createElement(j.a,null),r.a.createElement(x.a,{variant:"outline-primary",type:"submit"},"\u05e9\u05d2\u05e8!"),r.a.createElement(j.a,null)))))),r.a.createElement(D.a,null,ne)):r.a.createElement(ee.a,{animation:"border",variant:"primary"})};var ae=function(e){return r.a.createElement("main",{className:"App"},r.a.createElement(D.a,null,r.a.createElement(z.a,null,r.a.createElement(J.a,null,r.a.createElement(j.a,{sm:"1"}),r.a.createElement(j.a,{sm:"5"},r.a.createElement("h3",null,"\u05d8\u05d1\u05dc\u05ea \u05de\u05d9\u05d5\u05d7\u05d3\u05d9\u05dd \u05dc\u05d7\u05d5\u05d3\u05e9: ")),r.a.createElement(j.a,{sm:"5"},r.a.createElement(k.a.Control,{type:"month",name:"name",defaultValue:y()})),r.a.createElement(j.a,{sm:"1"})),r.a.createElement(J.a,null))))},ne=a(20);var re=function(e){var t=e.items,a=e.itemsPerPage,n=e.curPage,l=e.setCurPage,c=e.pagesPerSection,u=e.curSection,o=e.setCurSection,m=Math.max(0,Math.floor((t.length-1)/a)),i=Math.max(0,Math.floor((m-1)/c));return r.a.createElement(ne.a,{dir:"ltr"},r.a.createElement(ne.a.First,{onClick:function(){l(0),o(0)}}),r.a.createElement(ne.a.Prev,{onClick:function(){var e=Math.max(n-1,0);l(e),o(Math.floor(e/c))}}),0!==u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a.Item,{key:0,active:0===n,onClick:function(){return l(0)}},1),r.a.createElement(ne.a.Ellipsis,{onClick:function(){var e=Math.max(u-1,0);o(e),l((e+1)*c-1)}})),t.filter((function(e,t){return t%a===0})).filter((function(e,t){return t<c*(u+1)&&t>=c*u})).map((function(e,t){return r.a.createElement(ne.a.Item,{key:t+u*c,active:t+u*c===n,onClick:function(){return l(t+u*c)}},t+u*c+1)})),u!==i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a.Ellipsis,{onClick:function(){var e=Math.min(u+1,i);o(e),l(e*c)}}),r.a.createElement(ne.a.Item,{key:m,active:m===n,onClick:function(){return l(m)}},m+1)),r.a.createElement(ne.a.Next,{onClick:function(){var e=Math.min(n+1,m);l(e),o(Math.floor(e/c))}}),r.a.createElement(ne.a.Last,{onClick:function(){l(m),o(i)}}))};var le=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(0),o=Object(h.a)(u,2),m=o[0],i=o[1],s=Object(n.useState)(0),E=Object(h.a)(s,2),f=E[0],d=E[1],b=function(e){if(null!=e){var t="string"==typeof e?e:e.target.value;fetch("/weekconstraints?week="+t,{method:"GET"}).then((function(e){return e.json()})).then((function(e){c(e.week_constraints),i(0),d(0)})).catch((function(e){c([]),alert("couln't import week's constraints from DB: "+e)}))}},v=Object(n.useState)(0),g=Object(h.a)(v,2),p=g[0],y=g[1];Object(n.useEffect)((function(){b(w(1))}),[]);var C=r.a.createElement(re,{items:l,itemsPerPage:1,curPage:m,setCurPage:i,pagesPerSection:5,curSection:f,setCurSection:d});return r.a.createElement("main",{className:"App"},r.a.createElement(D.a,null,r.a.createElement(z.a,null,r.a.createElement(J.a,null,r.a.createElement(j.a,{sm:"2"}),r.a.createElement(j.a,{sm:"8"},r.a.createElement("h2",null,"\u05d8\u05d1\u05dc\u05ea \u05d0\u05d9\u05dc\u05d5\u05e6\u05d9\u05dd \u05de\u05d5\u05e8\u05d7\u05d1\u05ea")),r.a.createElement(j.a,{sm:"2"})),r.a.createElement("br",null),r.a.createElement(J.a,null,r.a.createElement(j.a,{sm:"2"},r.a.createElement(k.a.Label,null,"\u05d4\u05e6\u05d2 \u05d0\u05ea: ")),r.a.createElement(j.a,{sm:"5"},r.a.createElement(k.a.Control,{as:"select",onChange:function(e){y(e.target.value),"1"===e.target.value?c([]):b(w(1))},autofocus:!0},r.a.createElement("option",{value:"0"},"\u05db\u05dc \u05d4\u05de\u05e9\u05de\u05e8\u05d5\u05ea \u05d1\u05e9\u05d1\u05d5\u05e2 \u05de\u05e1\u05d5\u05d9\u05dd"),r.a.createElement("option",{value:"1"},"\u05db\u05dc \u05d4\u05de\u05e9\u05de\u05e8\u05d5\u05ea \u05e9\u05dc \u05d1\u05e7\u05e8 \u05de\u05e1\u05d5\u05d9\u05dd"))),r.a.createElement(j.a,{sm:"5"},0==p?r.a.createElement(S,{defaultWeek:1,onChange:b}):r.a.createElement(O,{title:"\u05d1\u05d7\u05e8 \u05d1\u05e7\u05e8/\u05d9\u05ea: ",bakarim:e.bakarim.map((function(e){return e.full_name})),onChange:function(e){if(null!=e){var t="string"==typeof e?e:e.target.value;fetch("/empconstraints?name="+t,{method:"GET"}).then((function(e){return e.json()})).then((function(e){c(e.emp_constraints),i(0),d(0)})).catch((function(e){c([]),alert("couln't import employees' constraints from DB: "+e)}))}},showChooseBakar:!0}))),r.a.createElement("br",null),l&&(1==p?l.filter((function(e,t){return t>=1*m&&t<1*(m+1)})):l).map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,null,r.a.createElement(K,{name:e.name,week:e.week,blocks:e.shifts,comments:e.comments})),r.a.createElement("hr",null))})),1==p&&C)))};var ce=function(e){var t=e.id;return"\u05e2\u05e8\u05d1"===e.header?t++:"\u05dc\u05d9\u05dc\u05d4"===e.header&&(t+=2),r.a.createElement("td",{className:"shifts-td"},e.shifts[t]&&e.shifts[t].map((function(t){return r.a.createElement("p",{className:"shifts-bakar",style:{backgroundColor:e.dictionary[t.label]}},t.label)})))};var ue=function(e){var t=[0,3,6,9,12,15,18].map((function(t){return r.a.createElement(ce,{header:e.header,id:t,shifts:e.shifts,dictionary:e.dictionary})}));return r.a.createElement("tr",null,r.a.createElement("th",null,e.header),t)};a(94);var oe=function(e){var t=Object(n.useState)("ready-table"),a=Object(h.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",{className:l},r.a.createElement(g.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("tr",null,r.a.createElement("th",{onDoubleClick:function(){c("ready-table"===l?"ready-table box bounce-7":"ready-table")}}),["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"].map((function(e){return r.a.createElement("th",null,e)}))),["\u05d1\u05d5\u05e7\u05e8","\u05e2\u05e8\u05d1","\u05dc\u05d9\u05dc\u05d4"].map((function(t){return r.a.createElement(ue,{header:t,shifts:e.shifts,dictionary:e.dictionary})}))),r.a.createElement(k.a.Control,{as:"textarea",className:"unresizeable",disabled:!0},e.comments),"ready-table"!==l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("h6",{dir:"ltr"},"Special thanks to Bana \u2665")))};var me=function(e){var t=e.counts,a=e._88,n=e.specials,l=e.dictionary;return r.a.createElement("div",{className:"mini-table"},r.a.createElement(g.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("tr",null,r.a.createElement("th",null,"\u05d1\u05e7\u05e8"),r.a.createElement("th",null,"\u05de\u05e9\u05de\u05e8\u05d5\u05ea"),r.a.createElement("th",null,"8-8"),r.a.createElement("th",null,"\u05de\u05d9\u05d5\u05d7\u05d3\u05d5\u05ea")),t&&Object.keys(t).map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{style:{backgroundColor:l[e]}},e),r.a.createElement("td",null,t[e]),r.a.createElement("td",null,a[e]||0),r.a.createElement("td",null,n[e]||0))}))))};var ie=function(e){var t=e.shifts,a=Object(n.useState)(0),l=Object(h.a)(a,2),c=l[0],u=l[1],o=Object(n.useState)(0),m=Object(h.a)(o,2),i=m[0],s=m[1],E=r.a.createElement(re,{items:t,itemsPerPage:1,curPage:c,setCurPage:u,pagesPerSection:5,curSection:i,setCurSection:s});return r.a.createElement("main",{className:"App"},E,r.a.createElement(D.a,null,r.a.createElement(J.a,null,r.a.createElement(j.a,{sm:"12"},r.a.createElement("h2",null,"\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05ea \u05e1\u05d9\u05d3\u05d5\u05e8\u05d9\u05dd"))),t.filter((function(e,t){return t>=1*c&&t<1*(c+1)})).map((function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,null,r.a.createElement(j.a,null,r.a.createElement("h5",null,"\u05d8\u05d1\u05dc\u05ea \u05d4\u05de\u05e9\u05de\u05e8\u05d5\u05ea \u05dc\u05e9\u05d1\u05d5\u05e2 ",t.week.slice(6,8)," \u05d1\u05ea\u05d0\u05e8\u05d9\u05db\u05d9\u05dd ",C(t.week)))),r.a.createElement(J.a,null,r.a.createElement(oe,{shifts:t.shifts,comments:t.comments,dictionary:e.dictionary}),r.a.createElement(me,{counts:t.shift_counts,_88:t._8_8_shifts,specials:t.specials,dictionary:e.dictionary})),r.a.createElement("hr",null))})),r.a.createElement(J.a,null,E)))},se=a(77),Ee=a(36);var fe=function(){var e=Object(n.useState)("1"),t=Object(h.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),u=Object(h.a)(c,2),o=u[0],m=u[1],i=Object(n.useState)([]),s=Object(h.a)(i,2),E=s[0],f=s[1],b=Object(n.useState)({}),v=Object(h.a)(b,2),g=v[0],p=v[1];return Object(n.useEffect)((function(){fetch("/getEmpsAndScheds",{method:"GET"}).then((function(e){return e.json()})).then((function(e){f(e.schedules);var t=e.employees;m(t);var a={};t&&t.map((function(e){a[e.full_name]=e.color,a[e.short_name]=e.color,a["short "+e.full_name]=e.short_name})),p(a)})).catch((function(e){alert("couldn't get bakarim or schedules from DB: "+e)}))}),[]),r.a.createElement("div",null,r.a.createElement(d,{title:"\u05d8\u05d5\u05e4\u05e1 \u05e0\u05d9\u05d4\u05d5\u05dc \u05de\u05e9\u05de\u05e8\u05d5\u05ea"}),r.a.createElement(se.a,{style:{margin:"auto auto 10px auto",maxWidth:"1420px"},defaultActiveKey:a,activeKey:a,onSelect:function(e){return l(e)}},r.a.createElement(Ee.a,{eventKey:"1",title:"\u05d4\u05db\u05e0\u05ea \u05e1\u05d9\u05d3\u05d5\u05e8"},r.a.createElement(te,{bakarim:o,dictionary:g})),r.a.createElement(Ee.a,{eventKey:"2",title:"\u05de\u05d9\u05d5\u05d7\u05d3\u05d9\u05dd"},r.a.createElement(ae,null)),r.a.createElement(Ee.a,{eventKey:"3",title:"\u05d0\u05d9\u05dc\u05d5\u05e6\u05d9\u05dd"},r.a.createElement(le,{bakarim:o})),r.a.createElement(Ee.a,{eventKey:"4",title:"\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d4"},r.a.createElement(ie,{bakarim:o,shifts:E,dictionary:g}))))};var he=function(e){var t=e.data,a=e.lineNumber,l=e.isEditable,c=e.removeSelf,u=t.full_name,o=t.short_name,m=t.color,i=a-1,s=Object(n.useState)(u),E=Object(h.a)(s,2),f=E[0],d=E[1],b=Object(n.useState)(o),v=Object(h.a)(b,2),g=v[0],p=v[1],j=Object(n.useState)(m),O=Object(h.a)(j,2),y=O[0],w=O[1],C=function(e){switch(e.target.id){case"fullName":d(e.target.value),e.target.className=e.target.value!==u?"form-control text-danger":"form-control";break;case"shortName":p(e.target.value),e.target.className=e.target.value!==o?"form-control text-danger":"form-control";break;case"color":w(e.target.value)}};return r.a.createElement("tr",null,r.a.createElement("td",null,a,"."),r.a.createElement("td",null,r.a.createElement(k.a.Control,{name:"full_name-"+i,id:"fullName",placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d0: \u05d0\u05d7\u05e9\u05d5\u05d5\u05e8\u05d5\u05e9 \u05d4\u05de\u05dc\u05da",value:f,maxLength:24,style:{backgroundColor:y},disabled:!l,onChange:C})),r.a.createElement("td",null,r.a.createElement(k.a.Control,{name:"short_name-"+i,id:"shortName",placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d0: \u05d0\u05d7\u05e9\u05d5\u05d5\u05d9",value:g,maxLength:8,style:{backgroundColor:y},disabled:!l,onChange:C})),r.a.createElement("td",null,r.a.createElement(k.a.Control,{type:"color",name:"color-"+i,id:"color",style:{padding:"3px",width:"36px",margin:"auto"},value:y,onChange:C,disabled:!l})),l&&r.a.createElement("td",null,r.a.createElement(x.a,{variant:"outline-danger",onClick:c},"\u05d4\u05e1\u05e8")))};var de=function(){var e=Object(n.useRef)(),t=Object(n.useState)([]),a=Object(h.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(),o=Object(h.a)(u,2),m=o[0],i=o[1],s=Object(n.useState)(!1),E=Object(h.a)(s,2),f=E[0],d=E[1];return Object(n.useEffect)((function(){fetch("/getemployees",{method:"GET"}).then((function(e){return e.json()})).then((function(e){c(e.all_emps),i(W.a.clone(e.all_emps))})).catch((function(e){return alert(e)}))}),[]),r.a.createElement("main",null,r.a.createElement(D.a,null,r.a.createElement(z.a,{fluid:!0},r.a.createElement(k.a,{ref:e,onSubmit:function(t){var a=l?l.length:0,n=new FormData(e.current);fetch("/submitemployees?num_of_emps="+a,{method:"POST",body:n}).then((function(e){return e})).then((function(e){})).catch((function(e){return alert(e)})),d(!1)}},r.a.createElement(J.a,null,r.a.createElement(j.a,{md:"12"},r.a.createElement("h3",{onClick:function(){return alert(JSON.stringify(l))}},"\u05e8\u05e9\u05d9\u05de\u05ea \u05d1\u05e7\u05e8\u05d9\u05dd"))),r.a.createElement(J.a,null,f?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(x.a,{variant:"outline-success",type:"submit"},"\u05e9\u05de\u05d9\u05e8\u05d4"),r.a.createElement(x.a,{variant:"outline-secondary",onClick:function(){c(m),d(!1)}},"\u05d1\u05d9\u05d8\u05d5\u05dc")):r.a.createElement(x.a,{variant:"outline-primary",onClick:function(){return alert("Work In Progress")}},"\u05e2\u05e8\u05d5\u05da")),r.a.createElement(J.a,{className:"text-align-right"},r.a.createElement(g.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"\u05e9\u05dd \u05de\u05dc\u05d0"),r.a.createElement("th",null,"\u05e9\u05dd \u05de\u05e7\u05d5\u05e6\u05e8"),r.a.createElement("th",null,"\u05e6\u05d1\u05e2"),f&&l.length>0&&r.a.createElement("th",null))),r.a.createElement("tbody",null,l.map((function(e,t){return r.a.createElement(he,{data:e,lineNumber:t+1,isEditable:f,removeSelf:function(){return function(e){var t=l.filter((function(t,a){return a!==e}));c(t)}(t)}})})),f&&r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement(x.a,{variant:"outline-primary",onClick:function(){c([].concat(Object(F.a)(l),[{}]))}},"\u05d4\u05d5\u05e1\u05e3 \u05d1\u05e7\u05e8 \u05d7\u05d3\u05e9")),r.a.createElement("td",null),l.length>0&&r.a.createElement("td",null),r.a.createElement("td",null)))))))))};var be=function(){return r.a.createElement("div",null,r.a.createElement(d,{title:"\u05d3\u05e3 \u05d0\u05d3\u05de\u05d9\u05df"}),r.a.createElement(de,null))};var ve=function(){return r.a.createElement("div",{dir:"ltr"},r.a.createElement("h1",null,"404"))},ge=a(75),pe=a(7);var ke=function(){return r.a.createElement(ge.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(pe.Switch,null,r.a.createElement(pe.Route,{exact:!0,path:"/"},r.a.createElement(pe.Redirect,{to:m})),r.a.createElement(pe.Route,{exact:!0,path:m,component:A}),r.a.createElement(pe.Route,{exact:!0,path:i,component:fe}),r.a.createElement(pe.Route,{exact:!0,path:s,component:be}),r.a.createElement(pe.Route,{component:ve})),r.a.createElement(f,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(96);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[78,1,2]]]);
//# sourceMappingURL=main.99c66ff0.chunk.js.map